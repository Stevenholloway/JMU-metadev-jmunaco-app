JMUNACOApp_workflow

Tools required: browser, Excel, email client or web client, Microsoft Remote Desktop, MarcEdit, OCLC Connexion, eXist eXide, eXist jmunaco app.  
Optional: Oxygen XML editor.

1	Create list of Faculty in a given JMU department or division in spreadsheet format, including JMU email (@jmu.edu; never use a “dukes” email account) with a password based on the department name. [Excel]
2	Confirm the list (name and email) with the appropriate liaison. [email]
3	Consult with the liaison on a date for the email solicitations, with the understanding that the liaison will have contacted the Department Chair before the date. [email]
4	Create user accounts, with JMU email for the ID and a password, and “jmunaco” set for the group. See CreateUserAccounts4eXist.docx for instructions. [Microsoft Remote Desktop, eXist Java Admin]
5	Be certain that the “data” directory in jmunaco is empty.  This is the directory where the new & pre-existing MARCXML NARs will be stored and edited. Use either eXist eXide or Oxygen XML editor for this. [browser, oXygen XML editor or eXist eXide]
6	Search for NARs in LC and VIAF.  Add URIs to spreadsheet. [browser, Excel]
7	Search for ORCiD iDs.  Add ORCiD iD to spreadsheet. [browser, Excel]
8	Search for ISNI iDs.  Add ISNI iD to spreadsheet. [browser, Excel]
9	Locate the existing LCNARs in OCLC Connexion.  Save to Local Save File. Export the NARs as a single MARC Collection file (ex: “EnglishDept_NARs.dat”). [OCLC Connexion]
10	Split the MARC Collection file into separate MARC binary (.mrc) records using MarcEdit Tools=>MARCSplit.  Choose “EnglishDept_NARs.dat” as the Source File, and “EnglishDept_Single” as the Destination Folder.  Set the Records Per File to “1”.  Process. [MarcEdit]
11	Convert the individual MARC binary (.mrc) files into MARCXML (.xml) using MarcEdit Tools=>Batch Process Records.  Choose the “EnglishDept_Single” as the Source Directory and set the Function to “From MARC to MARCXML”. Process.  A subfolder “processed_files” will be created with the individual MARCXML files. [MarcEdit]
12	The next step consists of renaming the individual MARCXML files & adding 988s with E-ID emails and passwords using the graphical interface in jmunaco app.  Open eXist (apps/eXide/index.html) and be sure that you are logged in as “admin.”  Go to apps/jmunaco/index.html and select “Load Existing.”  Hit the “Choose File” button.  Navigate to the “processed_file” directory and choose one of the .xml files.  A scrollable contents box should appear, permitting you to visualize the entire XML record.  Scroll down to the 100 field, where you will find the name of the person whose NAR you have chosen.  Press “choose” at the bottom of that field to select the record.  In the “Load Existing” form, enter the full JMU email address for the individual [consult the spreadsheet], with everything in lower case, in the “JMU E-ID” field.  In the “Password” field, enter the password you created for this account number in the spreadsheet– it has to match exactly.  If you located an ORCiD, VIAF or ISNI ID for the person, enter them now. Press “Save”.  A MARCXML record with the person’s JMU E-ID and “.xml” extension as the filename should have been created in the “jmunaco/data” directory.  Repeat this step until all of the existing NARs have been created in the jmunaco/data directory. Check the contents of the jmunaco/data directory using eXist eXide [browser, eXist eXide, jmunaco app] 
13	For faculty with NO pre-existing LCNAR, create skeletal NARs within the jmunaco app:  jmunaco/index.html=>Create New. In the empty form that appears, enter the preferred name in inverted order (“Cockburn, Brian”). Add the VIAF, ORCiD iDs and ISNI IDs, if any, to the new record. Enter the JMU email and password from the spreadsheet in the new record.  Press “Save.” Check the contents of the jmunaco/data directory using eXist eXide [browser, eXist eXide, jmunaco app]
14	Set permissions on all relevant NARs in jmunaco/data to “rw-rw-r—“.  The system will create skeletal NARs with permissions set to “rw-r—r—“ which can NOT be edited by Faculty. In eXide, choose the menu item File=>Manage=>Properties [“i”], for each file, being sure that the permissions correspond to USER: read, write, GROUP: read, write, OTHER: read.  The OWNER should default to “admin” and the GROUP to “jmunaco”. [browser, eXist eXide]
15	Test the skeletal NARs by opening them in the online form editor and saving an edit. You must first log out of eXist-db as administrator (apps/eXide/index.html=>click “Logged in as admin.” at the top right, which should change to “Login”). Navigate to jmunaco/form.html. You will need to log in TWICE using the full faculty email address and password. Each browser handles it somewhat differently.  Once you pull up the record in the form editor, change something on the form and save. Change it back and resave. [browser, eXist eXide, jmunaco app]
16	Prepare instructional emails with individual passwords. [email]
17	Confirm with liaison that Departmental Chair has been consulted. [email]
18	Send emails to Faculty. [email]
19	Respond to Faculty queries. [email]
20	NACO-process the Faculty-edited NARs using oXygen or eXide.  Check to see if a CV has been uploaded; if it has, export it and view it in the filesystem. [browser, oXygen XML editor or eXist eXide]
21	Proof the NACO-edited NARs. [browser, oXygen XML editor or eXist eXide]
22	Prepare the NARs for export.  This step consists of creating copies of the NARs, moving the copies to two directories, emptying the data directory, and stripping the 987 and 988 MARC fields from the NARs.  Two XQuery scripts manage all of this.  In eXide, login as admin, then open jmunaco/modules/archive-export.xq.  In line 17, for $dept-name in 'DEPARTMENT-NAME', replace DEPARTMENT-NAME with the name of the current targeted department, making certain that the dept. name is bracketed by single quotation marks (ex: ‘LET_Department’). Run the XQuery script by choosing “EVAL” in the dark menu line.  Several things should happen: the data directory is emptied, and identical new directories with the name of the targeted department are created in “export” and “data-archive” directories, respectively. [browser, eXist eXide]
23	In order to strip the 987 and 988 MARC fields, in eXide, check that you are logged in as admin, then open jmunaco/modules/delete987-988MARC.xq.  Run the XQuery script by choosing “EVAL” in the dark menu line.  All 987 and 988 MARC fields/subfields will be deleted from MARCXML files in the “export” directory and ALL subdirectories. [browser, eXist eXide]
24	Export the finished NARs to the file system. This can be done using eXist eXide.  Open the XML files in the export/department directory, in eXide, then choose the menu item File=>Download.  This step will have to be repeated until all of the files have been exported, presumably to the “Download” directory on your computer.   [browser, eXist eXide]
25	Convert the MARCXML NARs to MARC 21 binary format. Create a directory for the files, merge them into a single collection using MarcMerge, then convert them into binary format, MARCXML21=>MARC21. [MarcEdit]
26	Import the MARC21 binary collection into the Connexion online authority save file. The individual records should appear in the Authority online save file. [OCLC Connexion]
27	Complete NACO editing of NARs and run validation tests in Connexion. [OCLC Connexion]
28	Proof NARs before distribution. [OCLC Connexion]
29	If the jmunaco app-edited NAR is based on an existing LC-NAR, it will be necessary to cut and paste the new information into the existing authority record.  That is a real pain unless one of you can come up with a workaround…[OCLC Connexion]
30	Distribute approved NARs. [OCLC Connexion]
31	Notify Faculty when NAR has been published. [email]
